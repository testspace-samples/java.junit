language: java

env:
  global:
    - secure: kmMY3oyTMTfw20msctpDr3K0Q0W1pVJQAgvrJgvs72wuQW5sEdIcnMYMvXpk5nIK/QPhMU9w0yYGf93ExrkhRE6vCO3ETG4maJwg2TJa8OFnLtqmNSeT/bktmUriazb3c0gwLJ7MwBCr+3M2WMivgjlaw6F+cQt1JiyXJ5SACMWtCl7qq35JxVdiNCe69fYca596e2crdY+yASYEDiZy+fQn8EBrlEx2E2cM79nK2KPdkazAIa98K30hDQyUoDsYsVfeBJDBXauu3XFOBqSBVO5aJ+WnYNnsienTPd0Cfqfe7/9UZ3zHnnaKblNr+LU2YlJvlOu2af4IYWIdE50BEw==

before_script:
  - ./testspace_install.sh
  - export PATH="${HOME}/testspace:${PATH}"
  - mkdir -p shippable/codecoverage
  - mkdir -p shippable/testresults

script:
  - testspace config url $TESTSPACE_TOKEN
  - testspace import .testspace.xml
  - testspace run

after_script:
  - cp target/surefire-reports/TEST-TestSuite.xml shippable/testresults
  - cp target/site/cobertura/coverage.xml shippable/codecoverage
