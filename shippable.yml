language: java

env:
  global:
    - secure: Bu0T8owDMS2cNtPZyo9BlepmXnsg07rGdBeaUPtW5Xwvb8WoJKP0tMDHGjz+T0tFSy19W4s1Ow4wzkFexpgYFQqPm4bZVT6ygoyogEx8V6qJosv4s1n0c61t4Mo0nFRAXY6msrv6jyZu3M2+uie08SZ/LP+5pfQ0TmnBsJ+kh5X5+2xdtryaR83rARUVt5jTKAdJedU38KdSDKfCrzsFM+N+rOvCEo8DTz3qX70CG1I3tudLbGe8IHcyH3apu0Lg2g+IESg/Geg22TCr7PARU3Tf0KhZ/8Ezs++RXCnMSLh+q7cuSn86LuSYjO0wqdqfipkW00z9RWNYra2eYK1L4g==

before_script:
  - ./testspace_install.sh
  - export PATH="${HOME}/testspace:${PATH}"
  - mkdir -p shippable/codecoverage
  - mkdir -p shippable/testresults

script:
  - testspace config url $TESTSPACE_TOKEN
  - testspace import .testspace.xml
  - testspace run

after_script:
  - cp target/surefire-reports/TEST-TestSuite.xml shippable/testresults
  - cp target/site/cobertura/coverage.xml shippable/codecoverage
